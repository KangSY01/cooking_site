{% extends "base.html" %}
{% load static %}
{% block title %}레시피 상세 | 자취생의 창의 요리{% endblock %}

{% block content %}
<script src="{% static 'js/recipe_detail.js' %}"></script>

<section id="recipeDetailPage" class="recipe-detail-page" data-recipe-id="{{ recipe_id }}">

  <!-- 상단 영역: 제목 + 메타 -->
  <header class="recipe-detail-header">
    <div class="breadcrumb">← 메인으로 돌아가기</div>

    <div class="recipe-detail-top">
      <div>
        <h1 id="recipeTitle" class="recipe-detail-title">레시피 제목</h1>
        <p id="recipeSubtitle" class="recipe-detail-sub">
          간단한 설명 텍스트가 여기에 들어갑니다.
        </p>
        <div class="recipe-detail-meta">
          <span id="recipeAuthor">작성자: -</span>
          <span id="recipeTime">⏱ -분</span>
        </div>
        <div id="recipeTags" class="recipe-tags">
          <!-- 태그 버튼들 -->
        </div>
      </div>

      <div id="recipeActions" style="display:none;">
  <button type="button" id="deleteRecipeBtn">삭제하기</button>
</div>


    </div>

    <div class="recipe-detail-stats">
      <button id="subscribeBtn" class="btn primary small">구독하기</button>

      <div class="recipe-detail-rating">
        <span>평점:</span>
        <span id="recipeStars">⭐⭐⭐⭐⭐</span>
        <span id="recipeAvgScore" class="rating-score">0.0</span>
        <span id="recipeRatingCount" class="rating-count">0명 평가</span>
      </div>

      <div class="recipe-detail-likes">
        <button id="likeToggleBtn" class="btn-outline small">❤ 좋아요</button>
        <span id="recipeLikeCount">0</span>
      </div>
    </div>
  </header>

  <!-- 대표 이미지 -->
  <section class="recipe-detail-image-section">
    <img id="recipeImage" src="" alt="레시피 이미지" class="recipe-detail-image">
  </section>

  <!-- 재료 / 조리 과정 2컬럼 -->
  <section class="recipe-detail-main">
    <div class="recipe-detail-column">
      <h2 class="column-title">재료</h2>
      <ul id="ingredientList" class="ingredient-list">
        <!-- JS로 채움 -->
      </ul>
    </div>

    <div class="recipe-detail-column">
      <h2 class="column-title">조리 과정</h2>
      <ol id="stepList" class="step-list">
        <!-- JS로 채움 -->
      </ol>
    </div>
  </section>

  <!-- 댓글 영역 -->
  <section class="recipe-detail-comments">
    <h2 class="column-title">
      댓글 <span id="commentCount">(0)</span>
    </h2>

    <!-- 댓글 입력 박스 -->
    <div class="comment-input-box">
      <textarea
        id="commentInput"
        class="comment-textarea"
        placeholder="댓글을 입력하세요"
        rows="3"
      ></textarea>
      <button id="commentSubmitBtn" class="btn primary small">댓글 작성</button>
    </div>

    <!-- 댓글 리스트 -->
    <div id="commentList" class="comment-list">
      <!-- JS로 댓글 카드들 렌더링 -->
    </div>
  </section>

</section>

<style>
  .recipe-detail-page {
    max-width: 960px;
    margin: 32px auto 60px;
  }
  .recipe-detail-header {
    margin-bottom: 24px;
  }
  .breadcrumb {
    font-size: 13px;
    color: #888;
    margin-bottom: 8px;
    cursor: pointer;
  }
  .recipe-detail-top {
    display: flex;
    justify-content: space-between;
    gap: 16px;
    align-items: flex-start;
  }
  .recipe-detail-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .recipe-detail-sub {
    font-size: 14px;
    color: #666;
    margin-bottom: 8px;
  }
  .recipe-detail-meta span {
    font-size: 13px;
    color: #888;
    margin-right: 10px;
  }
  .recipe-tags {
    margin-top: 8px;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }
  .recipe-tag-pill {
    padding: 3px 8px;
    border-radius: 999px;
    background: #fff4e3;
    font-size: 12px;
    color: #c85a00;
  }
  .recipe-detail-actions {
    display: flex;
    gap: 8px;
  }
  .btn-outline.small {
    font-size: 12px;
    padding: 6px 12px;
    border-radius: 999px;
    border: 1px solid #ddd;
    background: #fff;
    cursor: pointer;
  }
  .btn.primary.small {
    font-size: 13px;
    padding: 8px 16px;
    border-radius: 999px;
    border: none;
    background: #e56600;
    color: #fff;
    cursor: pointer;
  }
  .recipe-detail-stats {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 16px;
    font-size: 13px;
  }
  .recipe-detail-rating span {
    margin-right: 4px;
  }
  .rating-score {
    font-weight: 600;
  }
  .recipe-detail-image-section {
    margin: 24px 0;
  }
  .recipe-detail-image {
    width: 100%;
    border-radius: 18px;
    object-fit: cover;
    max-height: 420px;
  }
  .recipe-detail-main {
    display: grid;
    grid-template-columns: 1.1fr 1.3fr;
    gap: 24px;
    margin-bottom: 32px;
  }
  .column-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 12px;
  }
  .ingredient-list,
  .step-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .ingredient-item {
    display: flex;
    justify-content: space-between;
    padding: 6px 10px;
    border-radius: 10px;
    background: #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.03);
    font-size: 13px;
    margin-bottom: 6px;
  }
  .step-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 10px;
    background: #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.03);
    font-size: 13px;
    margin-bottom: 8px;
  }
  .step-badge {
    width: 20px;
    height: 20px;
    border-radius: 999px;
    background: #ffb380;
    color: #fff;
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  /* 댓글 영역 */
  .recipe-detail-comments {
    margin-top: 12px;
  }
  .comment-input-box {
    display: flex;
    gap: 10px;
    margin-bottom: 16px;
  }
  .comment-textarea {
    flex: 1;
    resize: none;
    border-radius: 12px;
    border: 1px solid #ddd;
    padding: 8px 10px;
    font-size: 13px;
  }
  .comment-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .comment-item {
    display: flex;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 12px;
    background: #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.03);
    font-size: 13px;
  }
  .comment-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: #ffe1c5;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    flex-shrink: 0;
  }
  .comment-body {
    flex: 1;
  }
  .comment-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 4px;
  }
  .comment-author {
    font-weight: 600;
  }
  .comment-date {
    font-size: 11px;
    color: #888;
  }
  .comment-content {
    font-size: 13px;
    white-space: pre-wrap;
  }
  .comment-delete {
    font-size: 11px;
    color: #c44;
    cursor: pointer;
    margin-left: 8px;
  }
</style>

{% endblock %}